{"version":3,"file":"commonHelpers2.js","sources":["../src/js/task-10-01/01-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\"\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconsUrl from '../../img/icons.svg'; \nimport iconUrl from '../../img/bi-x-octagon.svg'; \n\nlet userSelectedDate = null;\nconst interval = 1000;\nlet intervalId;\n\nconst refs = {\n  days: document.querySelector(\".value[data-days]\"),\n  hours: document.querySelector(\".value[data-hours]\"),\n  minutes: document.querySelector(\".value[data-minutes]\"),\n  seconds: document.querySelector(\".value[data-seconds]\"),\n  startBtn: document.querySelector(\"button[data-start]\"),\n  picker: document.getElementById(\"datetime-picker\"),\n  stopBtn: document.querySelector(\"button[data-stop]\"),\n};\n\nrefs.startBtn.disabled = true;\nrefs.stopBtn.disabled = true;\n\nrefs.startBtn.addEventListener(\"click\", onStartButtonClick);\nrefs.stopBtn.addEventListener(\"click\", onStopButtonClick);\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    const date = new Date(selectedDates[0]);\n    if (date - new Date() > 0) {\n      userSelectedDate = date;\n      refs.startBtn.disabled = false;\n    } else {\n        // alert(\"Please choose a date in the future\");\n        iziToast.show({\n            message: \"Please choose a date in the future\",\n            messageColor: '#fafafb',         \n            messageSize: '16px', \n            messageLineHeight: '1.5',\n            backgroundColor: '#fc5a5a',\n            position: 'topRight',\n            closeOnEscape: true,\n            close: true,\n            // icon: '<img src=\"${iconUrl}\" style=\"width: 20px; height: 20px;\" />',\n            // icon:\n            // `<svg\n            //     class=\"alert-close-icon\"\n            //     width=\"20\"\n            //     height=\"20\">\n            //     <use href=\"${iconsUrl}#icon-bi_x-octagon\"></use>\n            // </svg>`,\n            icon: 'Icomoon',\n            iconUrl: `${iconUrl}`,\n\n            iconColor: '#fafafb',\n            overlay: true,\n            \n        });\n    }\n  },\n};\n\nconst instflatpickr = flatpickr(\"input#datetime-picker\", options);\n\nfunction updateTimer() {\n  if (!userSelectedDate) return;\n\n  const restTime = userSelectedDate - new Date();\n  console.log(\"restTime\", restTime);\n  if (restTime <= 0) {\n    changeControlsStatus();\n    clearInterval(intervalId);\n    intervalId = null;\n    return;\n  }\n  const formattedValues = convertMs(restTime);\n  insertDataToControls(formattedValues);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return addLeadingZero({ days, hours, minutes, seconds });\n}\n\nfunction addLeadingZero(dateObj) {\n  const keys = Object.keys(dateObj);\n\n  return keys.reduce((result, key, index) => {\n    const value = dateObj[key];\n    const formattedValue =\n      typeof value === \"number\" && value < 10\n        ? value.toString().padStart(2, \"0\")\n        : typeof value === \"string\" && value.length === 1\n        ? value.padStart(2, \"0\")\n        : value;\n\n    return { ...result, [key]: formattedValue };\n  }, {});\n}\n\nfunction onStartButtonClick() {\n  updateTimer();\n  intervalId = setInterval(updateTimer, interval);\n  changeControlsStatus();\n}\n\nfunction insertDataToControls({ days, hours, minutes, seconds }) {\n  refs.days.textContent = days;\n  refs.hours.textContent = hours;\n  refs.minutes.textContent = minutes;\n  refs.seconds.textContent = seconds;\n}\n\nfunction onStopButtonClick() {\n  resetTimer();\n}\n\nfunction changeControlsStatus() {\n  refs.startBtn.disabled = !refs.startBtn.disabled;\n  refs.picker.disabled = !refs.picker.disabled;\n  refs.stopBtn.disabled = !refs.stopBtn.disabled;\n}\n\nfunction resetTimer() {\n  userSelectedDate = new Date();\n  flatpickr.Date = new Date();\n  clearInterval(intervalId);\n  intervalId = null;\n  refs.startBtn.disabled = true;\n  refs.stopBtn.disabled = true;\n  refs.picker.disabled = false;\n  instflatpickr.setDate(new Date());\n}\n"],"names":["userSelectedDate","interval","intervalId","refs","onStartButtonClick","onStopButtonClick","options","selectedDates","date","iziToast","iconUrl","instflatpickr","flatpickr","updateTimer","restTime","changeControlsStatus","formattedValues","convertMs","insertDataToControls","ms","days","hours","minutes","seconds","addLeadingZero","dateObj","result","key","index","value","formattedValue","resetTimer"],"mappings":"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"}